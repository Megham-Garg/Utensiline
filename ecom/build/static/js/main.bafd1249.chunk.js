(this.webpackJsonpprojfrontend=this.webpackJsonpprojfrontend||[]).push([[0],{31:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),a=n(17),s=n.n(a),o=(n(31),n(6)),i=n(3),l=n(7),d=n(5),u=n.n(d),j=n(11),b="http://localhost:8000/api/",m=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(b,"user/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",console.error(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c in n=new FormData,t)n.append(c,t[c]);return e.prev=2,e.next=5,fetch("".concat(b,"user/login/"),{method:"POST",body:n});case 5:return r=e.sent,console.log("SUCCESS",r),e.next=9,r.json();case 9:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",console.error(e.t0));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){return void 0!=typeof window&&(!!localStorage.getItem("customToken")&&JSON.parse(localStorage.getItem("customToken")))},p=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f()&&f().user.id,void 0===typeof window){e.next=17;break}return localStorage.removeItem("customToken"),e.prev=3,e.next=6,fetch("".concat(b,"user/logout/").concat(n),{method:"GET"});case 6:return c=e.sent,console.log("Signout success"),t(),e.next=11,c.json();case 11:return e.abrupt("return",e.sent);case 14:return e.prev=14,e.t0=e.catch(3),e.abrupt("return",console.error(e.t0));case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),O=function(e,t){return e.location.pathname===t?{color:"#2ecc72"}:{color:"#FFFFFF"}},x=Object(i.g)((function(e){var t=e.history;e.path;return Object(c.jsx)("div",{children:Object(c.jsxs)("ul",{className:"nav nav-pills",children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(o.b,{style:O(t,"/"),className:"nav-link",to:"/",children:"Home"})}),f()&&Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(o.b,{style:O(t,"/cart"),className:"nav-link",to:"/cart",children:"Cart"})}),f()&&Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(o.b,{style:O(t,"/user/dashboard"),className:"nav-link",to:"/user/dashboard",children:"dashboard"})}),!f()&&Object(c.jsxs)(r.Fragment,{children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(o.b,{style:O(t,"/signup"),className:"nav-link",to:"/signup",children:"Signup"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(o.b,{style:O(t,"/signin"),className:"nav-link",to:"/signin",children:"Signin"})})]}),f()&&Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("span",{className:"nav-link text-warning",onClick:function(){p((function(){t.push("/")}))},children:"Signout"})})]})})})),v=function(e){var t=e.title,n=void 0===t?"Utensiline":t,r=e.className,a=void 0===r?"container-fluid bg-dark text-white p-4 main_body":r,s=e.children;return Object(c.jsxs)("div",{children:[Object(c.jsxs)("nav",{className:"navbar sticky-top navbar-dark bg-custom text-white text-center",children:[Object(c.jsx)("span",{className:"navbar-brand font-weight-bold",children:n}),Object(c.jsx)(x,{})]}),Object(c.jsx)("div",{className:a,children:s}),Object(c.jsx)("footer",{className:"footer bg-custom mt-auto pt-3",children:Object(c.jsx)("div",{className:"container-fluid text-white py-3",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-5 text-center",children:Object(c.jsx)("h4",{children:"If you got any queries, reach me out at utensiline@gmail.com"})}),Object(c.jsx)("div",{className:"col-2"}),Object(c.jsxs)("div",{className:"col-5",children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("button",{className:"btn btn-warning btn-lg",children:"Contact Us"})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("span",{className:"text-warning font-weight-bold",children:"An online utensil store by the manufacturers of Jagadhri, India"})})]})]})})})]})},g=function(e){var t=e.product.product_image;return Object(c.jsx)("div",{className:"row rounded border border-info",children:Object(c.jsx)("img",{src:t,style:{maxHeight:"100%",maxWidth:"100%"},className:"rounded",alt:""})})},N=n(2),w=function(e){var t=e.product,n=e.addToCart,a=void 0===n||n,s=e.removeFromCart,o=void 0!==s&&s,d=e.buyNow,u=void 0===d||d,j=e.reload,b=void 0===j?void 0:j,m=e.setReload,h=void 0===m?function(e){return e}:m,p=Object(r.useState)(!1),O=Object(l.a)(p,2),x=O[0],v=O[1],w=t?t.name:"A photo from pexels",y=t?t.description:"Default description",S=t?t.price:"Default",k=function(){f?(!function(e){var t=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.push(Object(N.a)({},e)),localStorage.setItem("cart",JSON.stringify(t)))}(t),console.log("Added to cart")):console.log("Login Please!")},C=function(){f?(!function(e,t){var n=[];void 0!==typeof window&&(n.push(e),localStorage.setItem("tempCart",JSON.stringify(n)),t())}(t,(function(){return v(!0)})),console.log("Added to cart")):console.log("Login Please!")};return Object(c.jsxs)("div",{className:"container card text-white bg-dark border border-info ",children:[Object(c.jsx)("div",{className:"card-header lead row",children:w}),Object(c.jsx)("div",{className:"card-body row",children:Object(c.jsxs)("div",{className:"container-fluid",children:[function(e){if(e)return Object(c.jsx)(i.a,{to:"/cart"})}(x),Object(c.jsx)(g,{product:t}),Object(c.jsx)("div",{className:"row lead bg-info rounded p-1 font-weight-normal text-wrap mt-2",children:y}),Object(c.jsxs)("div",{className:"row p-1 btn-info rounded mt-2",children:[S," \u20b9"]}),Object(c.jsx)("div",{className:"row",children:function(e){return e&&Object(c.jsx)("button",{onClick:k,className:"btn btn-block btn-outline-success mt-2 mb-2",children:"Add to Cart"})}(a)}),Object(c.jsx)("div",{className:"row",children:function(e){return e&&Object(c.jsx)("button",{onClick:function(){!function(e){var t=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(n,c){n.id===e&&t.splice(c,1)})),localStorage.setItem("cart",JSON.stringify(t)))}(t.id),h(!b),console.log(t.id,"Product removed from cart")},className:"btn btn-block btn-outline-danger mt-2 mb-2",children:"Remove from cart"})}(o)}),Object(c.jsx)("div",{className:"row",children:function(e){return e&&Object(c.jsx)("button",{onClick:C,className:"btn btn-block btn-outline-success mt-2 mb-2",children:"Buy Now"})}(u)})]})})]})},y=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(b,"product"),{method:"GET"});case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();function S(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(!1),o=Object(l.a)(s,2),i=o[0],d=o[1];return Object(r.useEffect)((function(){y().then((function(e){e.error?(d(e.error),console.error(i)):a(e)})).catch((function(e){console.error(e)}))})),Object(c.jsxs)(v,{children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("h1",{className:"mb-4",children:"Products"})}),Object(c.jsx)("div",{className:"row",children:n.map((function(e,t){return Object(c.jsx)("div",{className:"col-4 mb-4 pl-0",children:Object(c.jsx)(w,{product:e})},t)}))})]})}var k=n(14),C=function(){var e=Object(r.useState)({first_name:"",last_name:"",email:"",password:"",birth_date:"",error:"",success:!1}),t=Object(l.a)(e,2),n=t[0],a=t[1],s=n.first_name,i=n.last_name,d=n.email,u=n.password,j=n.birth_date,b=n.error,h=n.success,f=function(e){return function(t){a(Object(N.a)(Object(N.a)({},n),{},Object(k.a)({error:!1},e,t.target.value)))}},p=function(e){e.preventDefault(),a(Object(N.a)(Object(N.a)({},n),{},{error:!1})),m({first_name:s,last_name:i,email:d,password:u,birth_date:j}).then((function(e){e.email===d?a(Object(N.a)(Object(N.a)({},n),{},{first_name:"",last_name:"",email:"",password:"",birth_date:"",error:"",success:!0})):a(Object(N.a)(Object(N.a)({},n),{},{error:!0,success:!1}))})).catch((function(e){return console.error(e)}))};return Object(c.jsxs)(v,{title:"Sign Up Page",description:"A signup for Utensiline user",children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(c.jsxs)("div",{className:"alert alert-success",style:{display:h?"":"none"},children:["New account created successfully. Please ",Object(c.jsx)(o.b,{to:"/signin",children:"login now."})]})})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(c.jsx)("div",{className:"alert alert-danger",style:{display:b?"":"none"},children:"Check all fields again"})})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-light",children:"First Name"}),Object(c.jsx)("input",{className:"form-control",value:s,onChange:f("first_name"),type:"text"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-light",children:"Last Name"}),Object(c.jsx)("input",{className:"form-control",value:i,onChange:f("last_name"),type:"text"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-light",children:"Email"}),Object(c.jsx)("input",{className:"form-control",value:d,onChange:f("email"),type:"text"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-light",children:"password"}),Object(c.jsx)("input",{className:"form-control",value:u,onChange:f("password"),type:"password"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-light",children:"birth date"}),Object(c.jsx)("input",{className:"form-control",placeholder:"YYYY-MM-DD",type:"text",value:j,onChange:f("birth_date")})]}),Object(c.jsx)("button",{onClick:p,className:"btn btn-success btn-block",children:"Submit"})]})})})]})},T=n(25),E=function(e){var t=e.component,n=Object(T.a)(e,["component"]);return Object(c.jsx)(i.b,Object(N.a)(Object(N.a)({},n),{},{render:function(e){return f()?Object(c.jsx)(t,Object(N.a)({},e)):Object(c.jsx)(i.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},I=function(){return Object(c.jsx)(v,{title:"User dashboard",children:Object(c.jsx)("h1",{children:"Welcome to user dashboard page"})})},_=function(){var e=Object(r.useState)({email:"",password:"",error:"",success:!1,loading:!1,didRedirect:!1}),t=Object(l.a)(e,2),n=t[0],a=t[1],s=n.email,d=n.password,u=n.error,j=n.success,b=n.loading,m=(n.didRedirect,function(e){return function(t){a(Object(N.a)(Object(N.a)({},n),{},Object(k.a)({error:!1},e,t.target.value)))}}),p=function(e){e.preventDefault(),a(Object(N.a)(Object(N.a)({},n),{},{error:!1,loading:!0})),h({email:s,password:d}).then((function(e){e.token?function(e,t){void 0!==typeof window&&(localStorage.setItem("customToken",JSON.stringify(e)),t())}(e,(function(){console.log("TOKKEN ADDED"),a(Object(N.a)(Object(N.a)({},n),{},{didRedirect:!0}))})):a(Object(N.a)(Object(N.a)({},n),{},{loading:!1}))})).catch((function(e){return console.error(e)}))};return Object(c.jsxs)(v,{title:"Welcome to sign in page",description:"A signin page for Utensiline user",children:[b&&Object(c.jsx)("div",{className:"alert alert-info",children:Object(c.jsx)("h2",{children:"Loading..."})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(c.jsxs)("div",{className:"alert alert-success",style:{display:j?"":"none"},children:["New account created successfully. Please ",Object(c.jsx)(o.b,{to:"/signin",children:"login now."})]})})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(c.jsx)("div",{className:"alert alert-danger",style:{display:u?"":"none"},children:"Check all fields again"})})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-6 offset-sm-3 text-left",children:Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-light",children:"Email"}),Object(c.jsx)("input",{name:"email",className:"form-control",value:s,onChange:m("email"),type:"text"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-light",children:"password"}),Object(c.jsx)("input",{name:"password",className:"form-control",value:d,onChange:m("password"),type:"password"})]}),Object(c.jsx)("button",{onClick:p,className:"btn btn-success btn-block",children:"Submit"})]})})}),function(){if(f())return Object(c.jsx)(i.a,{to:"/"})}()]})},P=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(b,"payment/getToken/").concat(t,"/").concat(n,"/"),{method:"GET"});case 3:return c=e.sent,e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(j.a)(u.a.mark((function e(t,n,c){var r,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in r=new FormData,c)r.append(a,c[a]);return e.next=4,fetch("".concat(b,"payment/processPayment/").concat(t,"/").concat(n,"/"),{method:"POST",body:r});case 4:return s=e.sent,e.next=7,s.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),F=function(){var e=Object(j.a)(u.a.mark((function e(t,n,c){var r,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in r=new FormData,c)r.append(a,c[a]);return e.prev=2,e.next=5,fetch("".concat(b,"order/add/").concat(t,"/").concat(n,"/"),{method:"POST",body:r});case 5:return s=e.sent,e.next=8,s.json();case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",console.error(e.t0));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n,c){return e.apply(this,arguments)}}(),J=n(24),A=n.n(J),R=function(e){var t=e.products,n=e.reload,a=void 0===n?void 0:n,s=e.setReload,o=void 0===s?function(e){return e}:s,d=Object(r.useState)({error:null,loading:!1,success:!1,clientToken:null,instance:{}}),u=Object(l.a)(d,2),j=u[0],b=u[1],m=f&&f().user.id,h=f&&f().token;Object(r.useEffect)((function(){!function(e,t){P(e,t).then((function(e){if(e.error)b(Object(N.a)(Object(N.a)({},e),{},{error:e.error})),p((function(){return Object(c.jsx)(i.a,{to:"/"})}));else{var t=e.clientToken;b({clientToken:t})}}))}(m,h)}),[]);var O=function(){var e=0;return t.forEach((function(t){e+=parseFloat(t.price)})),e},x=function(){b({loading:!0});j.instance.requestPaymentMethod().then((function(e){var n={paymentMethodNonce:e.nonce,amount:O()};D(m,h,n).then((function(e){if(e.error)"1"===e.code&&(console.log("PAYMENT Failed!"),p((function(){return Object(c.jsx)(i.a,{to:"/"})})));else{b(Object(N.a)(Object(N.a)({},j),{},{success:e.success,loading:!1})),console.log("PAYMENT SUCCESS");var n="";t.forEach((function(e){n+=e.name+", "}));var r={products:n,trans_id:e.transaction.id,amount:e.transaction.amount,payment_stat:0,contact_address:"D44 Jai City Jagadhri 135003"};F(m,h,r).then((function(e){console.log(e),e.error?"1"===e.code&&(console.log("Order Failed!"),p((function(){return Object(c.jsx)(i.a,{to:"/"})}))):!0===e.success&&console.log("ORDER PLACED!!")})).catch((function(e){b({loading:!1,success:!1}),console.log("Order FAILED",e)})),s=function(){console.log("Did we got a crash?")},void 0!==typeof window&&(localStorage.removeItem("cart"),localStorage.setItem("cart",JSON.stringify([])),s()),o(!a)}var s})).catch((function(e){b({loading:!1,success:!1}),console.log("PAYMENT FAILED",e)}))}))};return Object(c.jsxs)("div",{children:[Object(c.jsxs)("h3",{children:["Your bill is ",O(),"\u20b9"]}),Object(c.jsx)("div",{children:null!==j.clientToken&&t.length>0?Object(c.jsxs)("div",{children:[Object(c.jsx)(A.a,{options:{authorization:j.clientToken},onInstance:function(e){return j.instance=e}}),Object(c.jsx)("button",{onClick:x,className:"btn btn-block btn-success",children:"Buy Now"})]}):Object(c.jsx)("h3",{children:"Please login first or add something in cart"})})]})},U=function(){var e=Object(r.useState)(!0),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)([]),o=Object(l.a)(s,2),i=o[0],d=o[1];Object(r.useEffect)((function(){var e=!0;return e&&d(function(e){if(void 0!==typeof window&&localStorage.getItem("cart"))return e?JSON.parse(localStorage.getItem("tempCart")):JSON.parse(localStorage.getItem("cart"))}(!1)),function(){e=!1}}),[n]);return Object(c.jsx)(v,{title:"Cart page",description:"Welcome to checkout",children:Object(c.jsxs)("div",{className:"row text-center",children:[Object(c.jsx)("div",{className:"col-6",children:i.length>0?function(e){return Object(c.jsx)("div",{children:e.map((function(e,t){return Object(c.jsx)(w,{product:e,removeFromCart:!0,addToCart:!1,buyNow:!1,reload:n,setReload:a},t)}))})}(i):Object(c.jsx)("h4",{children:"No products"})}),Object(c.jsx)("div",{className:"col-6",children:i.length>0?Object(c.jsx)(R,{products:i,setReload:a}):Object(c.jsx)("h3",{children:"Please login or add something in cart"})})]})})},Y=function(){return Object(c.jsx)(o.a,{children:Object(c.jsxs)(i.d,{children:[Object(c.jsx)(i.b,{path:"/",exact:!0,component:S}),Object(c.jsx)(i.b,{path:"/signup",exact:!0,component:C}),Object(c.jsx)(i.b,{path:"/signin",exact:!0,component:_}),Object(c.jsx)(E,{path:"/cart",exact:!0,component:U}),Object(c.jsx)(E,{path:"/user/dashboard",exact:!0,component:I})]})})};s.a.render(Object(c.jsx)(Y,{}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.bafd1249.chunk.js.map